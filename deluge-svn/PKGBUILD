# Contributor: xaiviax (xaiviax at comcast dot net)
# Maintainer: Dave Reisner (d at falconindy dot com)
pkgname=deluge-svn
pkgver=6035
pkgrel=1
pkgdesc="A bittorrent client written with python and pygtk"
arch=('i686' 'x86_64')
url="http://deluge-torrent.org/"
license=('GPL2')
depends=('pygtk' 'boost' 'pyxdg' 'librsvg' 'desktop-file-utils' 'python-mako' 'patch'
         'hicolor-icon-theme' 'setuptools' 'pyopenssl' 'twisted' 'python-chardet')
makedepends=('subversion' 'intltool')
optdepends=('libtorrent-rasterbar-deluge: alternative to provided libtorrent')
conflicts=('deluge')
provides=('deluge')
options=('!emptydirs')
install=deluge.install
source=()
md5sums=()

_svntrunk="http://svn.deluge-torrent.org/trunk/"
_svnmod="trunk"

build() {
  cd $startdir/src

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up -r $pkgver)
  else
    svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build  

  python setup.py build
  python setup.py install --root=$startdir/pkg

  rm  -rf  $startdir/src/$_svnmod-build
}
